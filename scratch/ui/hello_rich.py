# Generated by Claude Sonnet 4
from textual.app import App, ComposeResult
from textual.widgets import Static
from textual.reactive import reactive
from rich.panel import Panel
from rich.text import Text
import subprocess

OPTIONS = [
    ("æŸ¥çœ‹å½“å‰ç›®å½•", "ls"),
    ("æ˜¾ç¤ºå½“å‰ç”¨æˆ·", "whoami"),
    ("æ˜¾ç¤ºç³»ç»Ÿæ—¶é—´", "date"),
]

class Menu(Static):
    selected = reactive(0)

    def render(self):
        items = []
        for idx, (label, _) in enumerate(OPTIONS):
            prefix = "ðŸ‘‰ " if idx == self.selected else "   "
            style = "bold yellow" if idx == self.selected else None
            text = Text(prefix + label, style=style)
            items.append(text)
        return Panel(Text("\n").join(items), title="é€‰æ‹©ä¸€ä¸ªæ“ä½œï¼ˆä¸Šä¸‹é”®åˆ‡æ¢ï¼Œå›žè½¦æ‰§è¡Œï¼‰")

class MyApp(App):
    def compose(self) -> ComposeResult:
        yield Menu()
        yield Static("", id="output")

    def key_up(self):
        menu = self.query_one(Menu)
        menu.selected = (menu.selected - 1) % len(OPTIONS)

    def key_down(self):
        menu = self.query_one(Menu)
        menu.selected = (menu.selected + 1) % len(OPTIONS)

    def key_enter(self):
        menu = self.query_one(Menu)
        self.run_command(OPTIONS[menu.selected][1])

    def run_command(self, cmd):
        output_widget = self.query_one("#output", Static)
        try:
            result = subprocess.check_output(cmd, shell=True, text=True)
        except Exception as e:
            result = f"æ‰§è¡Œå‡ºé”™: {e}"
        output_widget.update(Panel(result.strip(), title=f"å‘½ä»¤è¾“å‡ºï¼š{cmd}"))

if __name__ == "__main__":
    MyApp().run()
